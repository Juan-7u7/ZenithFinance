<div class="auth-container">
  <div class="auth-card glass-card">
    <button (click)="goBack()" class="btn-text back-link">
      <lucide-icon [img]="icons.ArrowLeft" size="18"></lucide-icon>
      {{ (isAuthenticated() ? 'common.cancel' : 'auth.have_account') | translate }}
    </button>

    @if (!isSubmitted()) {
      <h1>{{ 'auth.forgot_password_title' | translate }}</h1>
      <p class="subtitle">{{ 'auth.forgot_password_desc' | translate }}</p>

      @if (errorMessage()) {
        <div class="error-alert">
          {{ errorMessage() }}
        </div>
      }

      <form [formGroup]="forgotForm" (ngSubmit)="onSubmit()" class="auth-form">
        <div class="form-group">
          <label for="email">{{ 'auth.email' | translate }}</label>
          <div class="input-wrapper">
            <input
              id="email"
              type="email"
              formControlName="email"
              placeholder="tu@email.com"
              [class.error]="forgotForm.get('email')?.touched && forgotForm.get('email')?.invalid"
            />
            <lucide-icon [img]="icons.Mail" class="input-icon" size="18"></lucide-icon>
          </div>
          @if (getErrorMessage('email')) {
            <span class="error-message">{{ getErrorMessage('email') }}</span>
          }
        </div>

        <button
          type="submit"
          class="btn btn-primary"
          [disabled]="forgotForm.invalid || isLoading()"
        >
          @if (isLoading()) {
            <span class="loading">{{ 'common.loading' | translate }}</span>
          } @else {
            <span>{{ 'common.save' | translate }}</span>
          }
        </button>
      </form>
    } @else {
      <div class="success-state fade-in">
        <div class="success-icon">
          <lucide-icon [img]="icons.CheckCircle" size="48"></lucide-icon>
        </div>
        <h2>{{ 'auth.forgot_password_success' | translate }}</h2>
        <p [innerHTML]="'auth.forgot_password_success_desc' | translate:{email: forgotForm.value.email}"></p>
        <button class="btn btn-primary" (click)="goBack()">
          {{ (isAuthenticated() ? 'common.success' : 'auth.login') | translate }}
        </button>
      </div>
    }
  </div>
</div>
