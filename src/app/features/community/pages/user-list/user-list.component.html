<div class="dashboard-container fade-in">
  <header class="dashboard-header glass-card">
    <div class="header-left">
      <button class="btn-icon-v2 back-btn" (click)="goBack()">
        <lucide-icon [img]="icons.ArrowLeft" size="20"></lucide-icon>
      </button>
      <div class="header-content">
        <h1>{{ 'community.title' | translate }}</h1>
        <p class="subtitle">{{ 'community.suggested' | translate }}</p>
      </div>
    </div>
    
    <div class="search-bar-container">
       <div class="search-input-wrapper glass-card">
         <lucide-icon [img]="icons.Search" size="18" class="search-icon"></lucide-icon>
         <input 
           type="text" 
           [placeholder]="'community.search_placeholder' | translate"
           [ngModel]="searchQuery()"
           (ngModelChange)="searchQuery.set($event); onSearch()"
           class="search-input"
         >
       </div>
    </div>

    <div class="actions">
      <button class="btn-icon-v2" (click)="goToProfile()" [title]="'profile.title' | translate">
        <lucide-icon [img]="icons.Settings" class="icon-settings"></lucide-icon>
      </button>
      <button class="btn-icon-v2 lang-btn" (click)="toggleLanguage()" [title]="'common.language' | translate">
        <lucide-icon [img]="icons.Languages" class="icon-lang"></lucide-icon>
        <span class="lang-code">{{ currentLang() | uppercase }}</span>
      </button>
      <button class="btn-icon-v2" (click)="toggleTheme()" [title]="'common.theme' | translate">
        <lucide-icon [img]="currentTheme() === 'light' ? icons.Moon : icons.Sun" class="icon-theme"></lucide-icon>
      </button>
      <button class="btn-icon-v2" (click)="logout()" [title]="'dashboard.logout' | translate">
        <lucide-icon [img]="icons.LogOut"></lucide-icon>
      </button>
    </div>
  </header>

  <div class="users-grid">
    @if (loading()) {
      <!-- Skeletons -->
      @for (i of [1,2,3,4,5,6]; track i) {
        <div class="skeleton-card user-card-skeleton"></div>
      }
    } @else {
      @if (users().length === 0) {
        <div class="empty-state glass-card">
          <lucide-icon [img]="icons.User" size="48" class="empty-icon"></lucide-icon>
          <p>{{ 'community.no_users' | translate }}</p>
        </div>
      } @else {
        @for (user of users(); track user.id) {
          <div class="user-card glass-card slide-up">
            <div class="user-avatar-wrapper">
              @if (user.avatar_url) {
                <img [src]="user.avatar_url" [alt]="user.name" class="user-avatar">
              } @else {
                <div class="user-avatar placeholder">
                  {{ user.name?.charAt(0)?.toUpperCase() || 'U' }}
                </div>
              }
            </div>
            
            <div class="user-info">
              <h3>{{ user.name || 'User' }}</h3>
              <!-- <span class="user-handle">@{{ user.email?.split('@')?.[0] }}</span> -->
            </div>

            <button class="btn-connect">
              <lucide-icon [img]="icons.UserPlus" size="16"></lucide-icon>
              <span>{{ 'community.connect' | translate }}</span>
            </button>
          </div>
        }
      }
    }
  </div>
</div>
